---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";

const posts = await getCollection("blog");
const tags = [...new Set(posts.flatMap((post) => post.data.tags))].sort((a, b) =>
  a.localeCompare(b)
);
const base = import.meta.env.BASE_URL;
---

<BaseLayout title="Tags | Litch's Grok Log" description="All tags from Litch's Grok Log posts.">
  <section class="section-block">
    <h1>Tags</h1>
    <p class="lede">Browse posts by topic.</p>
    <ul class="tag-grid">
      {
        tags.map((tag) => (
          <li>
            <a class="tag" href={`${base}/tags/${encodeURIComponent(tag)}/`}>
              #{tag}
            </a>
          </li>
        ))
      }
    </ul>
  </section>
</BaseLayout>
